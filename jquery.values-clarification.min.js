!function(e){var t=function(t,n){this.element=e(t);this.picker=e('<div class="slider">'+'<div class="slider-track">'+'<div class="slider-selection"></div>'+'<div class="slider-handle"></div>'+'<div class="slider-handle"></div>'+"</div>"+'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'+"</div>").insertBefore(this.element).append(this.element);this.id=this.element.data("slider-id")||n.id;if(this.id){this.picker[0].id=this.id}if(typeof Modernizr!=="undefined"&&Modernizr.touch){this.touchCapable=true}var r=this.element.data("slider-tooltip")||n.tooltip;this.tooltip=this.picker.find(".tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.orientation=this.element.data("slider-orientation")||n.orientation;switch(this.orientation){case"vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width","100%");this.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth";this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px";break}this.min=this.element.data("slider-min")||n.min;this.max=this.element.data("slider-max")||n.max;this.step=this.element.data("slider-step")||n.step;this.value=this.element.data("slider-value")||n.value;if(this.value[1]){this.range=true}this.selection=this.element.data("slider-selection")||n.selection;this.selectionEl=this.picker.find(".slider-selection");if(this.selection==="none"){this.selectionEl.addClass("hide")}this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;var i=this.element.data("slider-handle")||n.handle;switch(i){case"round":this.handle1.addClass("round");this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle");this.handle2.addClass("triangle");break}if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=n.formater;this.layout();if(this.touchCapable){this.picker.on({touchstart:e.proxy(this.mousedown,this)})}else{this.picker.on({mousedown:e.proxy(this.mousedown,this)})}if(r==="show"){this.picker.on({mouseenter:e.proxy(this.showTooltip,this),mouseleave:e.proxy(this.hideTooltip,this)})}else{this.tooltip.addClass("hide")}};t.prototype={constructor:t,over:false,inDrag:false,showTooltip:function(){this.tooltip.addClass("in");this.over=true},hideTooltip:function(){if(this.inDrag===false){this.tooltip.removeClass("in")}this.over=false},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%";this.handle2Stype[this.stylePos]=this.percentage[1]+"%";if(this.orientation=="vertical"){this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"}else{this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"}if(this.range){this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1]));this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}else{this.tooltipInner.text(this.formater(this.value[0]));this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}},mousedown:function(t){if(this.touchCapable&&t.type==="touchstart"){t=t.originalEvent}this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];var n=this.getPercentage(t);if(this.range){var r=Math.abs(this.percentage[0]-n);var i=Math.abs(this.percentage[1]-n);this.dragged=r<i?0:1}else{this.dragged=0}this.percentage[this.dragged]=n;this.layout();if(this.touchCapable){e(document).on({touchmove:e.proxy(this.mousemove,this),touchend:e.proxy(this.mouseup,this)})}else{e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)})}this.inDrag=true;var s=this.calculateValue();this.element.trigger({type:"slideStart",value:s}).trigger({type:"slide",value:s});return false},mousemove:function(e){if(this.touchCapable&&e.type==="touchmove"){e=e.originalEvent}var t=this.getPercentage(e);if(this.range){if(this.dragged===0&&this.percentage[1]<t){this.percentage[0]=this.percentage[1];this.dragged=1}else if(this.dragged===1&&this.percentage[0]>t){this.percentage[1]=this.percentage[0];this.dragged=0}}this.percentage[this.dragged]=t;this.layout();var n=this.calculateValue();this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n);return false},mouseup:function(t){if(this.touchCapable){e(document).off({touchmove:this.mousemove,touchend:this.mouseup})}else{e(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}this.inDrag=false;if(this.over==false){this.hideTooltip()}this.element;var n=this.calculateValue();this.element.trigger({type:"slideStop",value:n}).data("value",n).prop("value",n);return false},calculateValue:function(){var e;if(this.range){e=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step];this.value=e}else{e=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step;this.value=[e,this.value[1]]}return e},getPercentage:function(e){if(this.touchCapable){e=e.touches[0]}var t=(e[this.mousePos]-this.offset[this.stylePos])*100/this.size;t=Math.round(t/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,t))},getValue:function(){if(this.range){return this.value}return this.value[0]},setValue:function(e){this.value=e;if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.layout()}};e.fn.slider=function(n,r){return this.each(function(){var i=e(this),s=i.data("slider"),o=typeof n==="object"&&n;if(!s){i.data("slider",s=new t(this,e.extend({},e.fn.slider.defaults,o)))}if(typeof n=="string"){s[n](r)}})};e.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(e){return e}};e.fn.slider.Constructor=t}(window.jQuery);jQuery.noConflict();jQuery(document).ready(function(){jQuery("table.vce-options").hide();jQuery("table.vce-factors").hide();var e=Array();jQuery("table.vce-options thead tr th").each(function(t,n){var r=jQuery(this).text().toLowerCase();e[t]=r});var t=Array();var n=Array();var r=0;var i=0;jQuery("table.vce-options tbody tr").each(function(s,o){i++;t[s]=Array();jQuery(this).children("td").each(function(i,o){t[s][e[i]]=jQuery(this).text();if(e[i]=="label"){n[r]=jQuery(this).text();r++}})});var s=(i+1)*10;var o=100-s-5;var u='<div id="option-side" style="margin-left: 5%; float: right; width: '+s+'%;"><h3>what\'s best for me</h3><div id="options" class="boxcolor"><ul></ul><br clear="left" /></div></div>';jQuery("table.vce-options").after(u);var a='<div id="factors" style="width: '+o+'%;"><h3>what matters to me</h3><div id="slider-endpoints"><div id="right-endpoint"><span class="label">matters a lot</span></div><div id="left-endpoint"><span class="label">doesn\'t matter at all</span></div></div><ul></ul></div>';jQuery("table.vce-factors").after(a);for(var f=0;f<t.length;f++){var l='<li id="'+t[f]["label"]+'">';l+='<div class="recommendation">best choice for you</div>';l+='<div class="box-container"><div class="box" style="background-color: '+t[f]["color"]+';">&nbsp</div></div>';l+='<div class="info"><h4>'+t[f]["name"]+"</h4></div>";l+="</li>";jQuery("#options ul").append(l)}var c=Array();jQuery("table.vce-factors thead tr th").each(function(e,t){var n=jQuery(this).text().toLowerCase();c[e]=n});var h=Array();var p=jQuery("table.vce-factors").hasClass("vce-constrained")&&jQuery("table.vce-factors tbody tr").length==2;var d=jQuery("table.vce-factors").hasClass("vce-tooltip");jQuery("table.vce-factors tbody tr").each(function(e,t){h[e]=Array();jQuery(this).children("td").each(function(t,n){h[e][c[t]]=jQuery(this).text()})});for(var f=0;f<h.length;f++){var l="<li>";var v;if(p&&f>0){v=100-h[0]["value"]}else{v=h[f]["value"]}var m=Math.round(jQuery("div#factors").width()-40);l+='<input style="width: '+m+'px;" id="factor-'+h[f]["label"]+'" type="text" class="span4 slider" value="'+v+'"';for(var g=0;g<n.length;g++){l+="data-multiplier-"+n[g]+'="'+h[f][n[g]]+'"'}if(p){l+=" data-constrained=true"}if(d){l+=' data-slider-tooltip="show"'}else{l+=' data-slider-tooltip="hide"'}l+=" />";l+='<div class="text well">'+h[f]["name"]+"</div>";l+="</li>";jQuery("#factors ul").append(l)}jQuery("input.slider").each(function(){jQuery(this).attr("data-slider-value",jQuery(this).val())});(function(e){e.fn.set_option_vals=function(){jQuery(this).find("ul li").each(function(){var e=0;var t=jQuery(this).attr("id");jQuery("input.slider").each(function(){var n=Number(jQuery(this).data("multiplier-"+t));var r=jQuery(this).data("slider").getValue();e+=n*r});jQuery("#"+t+" div.box").height(e)})}})(jQuery);jQuery("input.slider").slider({min:0,max:100,step:1,orientation:"horizontal",selection:"before"}).on("slide",function(e){var t=jQuery(e.target).data("slider").getValue();jQuery(e.target).attr("value",t);if(jQuery(e.target).data("constrained")=="true"||jQuery(e.target).data("constrained")===true){var n=jQuery(e.target).attr("id");var r=jQuery("input.slider:not(#"+n+")");var i=100-t;r.slider("setValue",i)}jQuery("#options").set_option_vals()}).on("slideStop",function(e){var t=jQuery(e.target).attr("id");if(jQuery(e.target).data("constrained")=="true"||jQuery(e.target).data("constrained")===true){var n=true;var r=jQuery("input.slider:not(#"+t+")");var i=r.attr("id")}if(typeof Qualtrics==="undefined"){}else{var s=jQuery(e.target).data("slider").getValue();Qualtrics.SurveyEngine.setEmbeddedData(t,s);if(n){var o=100-s;r.slider("setValue",o);Qualtrics.SurveyEngine.setEmbeddedData(i,o)}var u=t.replace("factor","strdata");var a=Math.round((new Date).getTime()/1e3);var f=Qualtrics.SurveyEngine.getEmbeddedData(u);if(f===undefined){var l=s+":"+a}else{var l=f+";"+s+":"+a}Qualtrics.SurveyEngine.setEmbeddedData(u,l);if(n){var c=i.replace("factor","strdata");var h=Qualtrics.SurveyEngine.getEmbeddedData(c);if(h===undefined){var p=o+":"+a}else{var p=h+";"+o+":"+a}Qualtrics.SurveyEngine.setEmbeddedData(c,p)}}});jQuery("#options").set_option_vals()})